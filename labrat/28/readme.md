üõ†Ô∏è 4. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞ (–ó–∞–¥–∞–Ω–∏—è –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤)
====
# –ó–∞–¥–∞–Ω–∏–µ 1: –û—Å–Ω–æ–≤—ã (–†–∞–∑–º–∏–Ω–∫–∞)
–ù–∞–ø–∏—à–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É, –∫–æ—Ç–æ—Ä–∞—è –∑–∞–ø—É—Å–∫–∞–µ—Ç 3 –≥–æ—Ä—É—Ç–∏–Ω—ã.
-	–ü–µ—Ä–≤–∞—è –ø–∏—à–µ—Ç –≤ –∫–æ–Ω—Å–æ–ª—å "–ì–æ—Ä—É—Ç–∏–Ω–∞ 1: –ü—Ä–∏–≤–µ—Ç!"
-	–í—Ç–æ—Ä–∞—è –ø–∏—à–µ—Ç "–ì–æ—Ä—É—Ç–∏–Ω–∞ 2: –ú–∏—Ä!"
-	–¢—Ä–µ—Ç—å—è –ø–∏—à–µ—Ç "–ì–æ—Ä—É—Ç–∏–Ω–∞ 3: Golang!"
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ sync.WaitGroup, —á—Ç–æ–±—ã –¥–æ–∂–¥–∞—Ç—å—Å—è –≤—ã–≤–æ–¥–∞ –≤—Å–µ—Ö —Ç—Ä–µ—Ö —Ñ—Ä–∞–∑ –ø–µ—Ä–µ–¥ –≤—ã—Ö–æ–¥–æ–º –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã. –ü–æ—Ä—è–¥–æ–∫ –≤—ã–≤–æ–¥–∞ —Ñ—Ä–∞–∑ –Ω–µ –≤–∞–∂–µ–Ω.
# –ó–∞–¥–∞–Ω–∏–µ 2: –ò–º–∏—Ç–∞—Ü–∏—è "–ü–∏–Ω–≥–∞" —Å–∞–π—Ç–æ–≤
–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤—ã –ø–∏—à–µ—Ç–µ —É—Ç–∏–ª–∏—Ç—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–∞–π—Ç–æ–≤.
1.	–°–æ–∑–¥–∞–π—Ç–µ —Å–ª–∞–π—Å —Å—Ç—Ä–æ–∫ —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ —Å–∞–π—Ç–æ–≤: []string{"google.com", "yandex.ru", "github.com", "stackoverflow.com"}.
2.	–í —Ü–∏–∫–ª–µ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∞–π—Ç–∞ –≥–æ—Ä—É—Ç–∏–Ω—É.
3.	–í–Ω—É—Ç—Ä–∏ –≥–æ—Ä—É—Ç–∏–Ω—ã:
    -	–í—ã–≤–µ–¥–∏—Ç–µ "–ù–∞—á–∏–Ω–∞—é –ø—Ä–æ–≤–µ—Ä–∫—É <—Å–∞–π—Ç>".
    -	–°–¥–µ–ª–∞–π—Ç–µ —Å–ª—É—á–∞–π–Ω—É—é –ø–∞—É–∑—É (time.Sleep) –æ—Ç 1 –¥–æ 3 —Å–µ–∫—É–Ω–¥ (—á—Ç–æ–±—ã –∏–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞).
    -	–í—ã–≤–µ–¥–∏—Ç–µ "–ü—Ä–æ–≤–µ—Ä–∫–∞ <—Å–∞–π—Ç> –∑–∞–≤–µ—Ä—à–µ–Ω–∞".
4.	–í main –¥–æ–∂–¥–∏—Ç–µ—Å—å –≤—Å–µ—Ö –∏ –Ω–∞–ø–∏—à–∏—Ç–µ "–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Å–∞–π—Ç–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∞".<br>
> [!TIP] 
> –ü–æ–¥—Å–∫–∞–∑–∫–∞ –¥–ª—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏:
``import "math/rand"
// ...
duration := time.Duration(rand.Intn(3)) * time.Second
time.Sleep(duration)``

# –ó–∞–¥–∞–Ω–∏–µ 3: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (–µ—Å–ª–∏ —É—Å–ø–µ–ª–∏)
–í–æ–∑—å–º–∏—Ç–µ —Å–≤–æ–π –∫–æ–¥ —Å –ø—Ä–æ—à–ª–æ–≥–æ –∑–∞–Ω—è—Ç–∏—è (–≥–¥–µ –≤—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ time.Sleep –¥–ª—è –æ–∂–∏–¥–∞–Ω–∏—è) –∏ –ø–µ—Ä–µ–¥–µ–ª–∞–π—Ç–µ –µ–≥–æ –Ω–∞ sync.WaitGroup.
# –ó–∞–¥–∞–Ω–∏–µ 4: "–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫–∞–∑–æ–≤"
–í–∞–º –Ω—É–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É, –∏–º–∏—Ç–∏—Ä—É—é—â—É—é —Å–∏—Å—Ç–µ–º—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–∫–∞–∑–æ–≤ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–µ. –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –∫ –≤–∞–º –ø—Ä–∏—à–µ–ª –ø–∞–∫–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–∫—É–ø–∫–∞—Ö, –∏ –∫–∞–∂–¥–∞—è –ø–æ–∫—É–ø–∫–∞ —Ç—Ä–µ–±—É–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ "–≤–∞–ª–∏–¥–∞—Ü–∏—é" –∏ "–æ—Ç–ø—Ä–∞–≤–∫—É –Ω–∞ —Å–∫–ª–∞–¥". –î–µ–ª–∞—Ç—å —ç—Ç–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ, –ø–æ—ç—Ç–æ–º—É –Ω—É–∂–Ω–æ —Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å.
# –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∑–∞–¥–∞—á–µ:
1.	–°–æ–∑–¥–∞–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É Order (–ó–∞–∫–∞–∑) —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –ø–æ–ª—è–º–∏:
    -	ID (—Ü–µ–ª–æ–µ —á–∏—Å–ª–æ).
    -	Customer (—Å—Ç—Ä–æ–∫–∞, –∏–º—è –∫–ª–∏–µ–Ω—Ç–∞).
    -	Amount (–ø–ª–∞–≤–∞—é—â–µ–µ —á–∏—Å–ª–æ, —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞).
2.	–í —Ñ—É–Ω–∫—Ü–∏–∏ main —Å–æ–∑–¥–∞–π—Ç–µ —Å–ª–∞–π—Å (slice) –∏–∑ 5-7 —Ä–∞–∑–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤.
3.	–ù–∞–ø–∏—à–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é (–∏–ª–∏ –º–µ—Ç–æ–¥) processOrder, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–∫–∞–∑, –ø–µ—á–∞—Ç–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ "–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫–∞–∑–∞ [ID] –¥–ª—è [Customer]..." –∏ –∏–º–∏—Ç–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —á–µ—Ä–µ–∑ time.Sleep (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1 —Å–µ–∫—É–Ω–¥—É). –ü–æ—Å–ª–µ —Å–Ω–∞ –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –≤—ã–≤–æ–¥–∏—Ç—å "–ó–∞–∫–∞–∑ [ID] –Ω–∞ —Å—É–º–º—É [Amount] —É—Å–ø–µ—à–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω".
4.	–ò—Å–ø–æ–ª—å–∑—É—è —Ü–∏–∫–ª for, –ø—Ä–æ–π–¥–∏—Ç–µ—Å—å –ø–æ —Å–ª–∞–π—Å—É –∑–∞–∫–∞–∑–æ–≤ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–∞–∂–¥–æ–≥–æ –∑–∞–∫–∞–∑–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –≥–æ—Ä—É—Ç–∏–Ω–µ.
5.	–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ sync.WaitGroup, —á—Ç–æ–±—ã –≥–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è main –¥–æ–∂–¥–∞–ª–∞—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö –∑–∞–∫–∞–∑–æ–≤ –ø–µ—Ä–µ–¥ –≤—ã—Ö–æ–¥–æ–º.
> [!TIP] 
> –í–Ω—É—Ç—Ä–∏ —Ü–∏–∫–ª–∞ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ —Å–ª–µ–¥–∏—Ç–µ –∑–∞ —Ç–µ–º, –∫–∞–∫—É—é –∏–º–µ–Ω–Ω–æ >–ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤—ã –ø–µ—Ä–µ–¥–∞–µ—Ç–µ –≤ –≥–æ—Ä—É—Ç–∏–Ω—É.
–í —ç—Ç–æ–º –∑–∞–¥–∞–Ω–∏–∏ –≤—ã –º–æ–¥–µ–ª–∏—Ä—É–µ—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω "Worker Pool" (–≤ —É–ø—Ä–æ—â–µ–Ω–Ω–æ–º –≤–∏–¥–µ). –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Order –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–Ω–æ—Ä–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∏—Ö –≤ –ø–æ—Ç–æ–∫ –∫–∞–∫ –µ–¥–∏–Ω—ã–π –æ–±—ä–µ–∫—Ç. –ê –ø–µ—Ä–µ–¥–∞—á–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é (–±–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª—è *Order –≤ –∞—Ä–≥—É–º–µ–Ω—Ç–∞—Ö —Ñ—É–Ω–∫—Ü–∏–∏ processOrder) –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∫–∞–∂–¥–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ —Å–≤–æ–µ–π –ª–∏—á–Ω–æ–π –∫–æ–ø–∏–µ–π –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ –∏–∑–±–∞–≤–ª—è–µ—Ç –æ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (–º—å—é—Ç–µ–∫—Å—ã) –¥–ª—è –∑–∞—â–∏—Ç—ã –¥–∞–Ω–Ω—ã—Ö –æ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π.

# code
### task1

```package main

import (
	"fmt"
	"sync"
)

func main() {

	var wg sync.WaitGroup

	wg.Add(3)

	go func() {
		defer wg.Done()
		fmt.Println("–ì–æ—Ä—É—Ç–∏–Ω–∞ 1: –ü—Ä–∏–≤–µ—Ç!")
	}()

	go func() {
		defer wg.Done()
		fmt.Println("–ì–æ—Ä—É—Ç–∏–Ω–∞ 2: –º–∏—Ä!")
	}()

	go func() {
		defer wg.Done()
		fmt.Println("–ì–æ—Ä—É—Ç–∏–Ω–∞ 3: golang!")
	}()
	wg.Wait()
}```

### task2

```package main

import (
	"fmt"
	"math/rand"
	"sync"
	"time"
)

func main() {
	domains := []string{"google.com", "yandex.ru", "github.com", "stackoverflow.com"}
	var wg sync.WaitGroup

	wg.Add(len(domains))

	for _, domain := range domains {
		go func(s string) {
			fmt.Printf("initializing check %s\n", s)
			duration := time.Duration(rand.Intn(3)) * time.Second
			time.Sleep(duration)
			fmt.Printf("init %s done\n", s)
		}(domain)
	}
}```


### task3

```package main

import (
    "flag"
    "fmt"
    "sync"
)

const (
    messagePerGoroutine = 3
)

func printMessage(id int, wg *sync.WaitGroup) {
    defer wg.Done()
    for i := 0; i < messagePerGoroutine; i++ {
        fmt.Printf("[goroutine %d] message %d\n", id, i)
    }
}

func main() {
    countFlag := flag.Int("count", 2, "—Å–∫–æ–ª—å–∫–æ –≥–æ—Ä—É—Ç–∏–Ω –∑–∞–ø—É—Å—Ç–∏—Ç—å")
    flag.Parse()
    count := *countFlag
    var wg sync.WaitGroup
    wg.Add(count)

    for i := 0; i < count; i++ {
        go printMessage(i, &wg)
    }

    wg.Wait()
}
```


### task4


```
package main

import (
	"fmt"
	"math/rand/v2"
	"sync"
	"time"
)

type Order struct {
	ID       int
	Customer string
	Amount   int
}

func ShopOrder(order Order, wg *sync.WaitGroup) {
	defer wg.Done()
	fmt.Printf("–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫–∞–∑–∞ %d –¥–ª—è %s...\n", order.ID, order.Customer)

	duration := time.Duration(rand.IntN(3)) * time.Second
	time.Sleep(duration)

	fmt.Printf("–ó–∞–∫–∞–∑ %d –Ω–∞ —Å—É–º–º—É %d —É—Å–ø–µ—à–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω\n", order.ID, order.Amount)
}

func main() {
	orders := []Order{
		{ID: 101, Customer: "Kostya", Amount: 2354},
		{ID: 102, Customer: "alfedov", Amount: 6475262},
		{ID: 103, Customer: "lololoska", Amount: 634},
		{ID: 104, Customer: "genadiy", Amount: 63426},
		{ID: 105, Customer: "erdjan", Amount: 345646},
	}

	var wg sync.WaitGroup

	fmt.Println("–ó–∞–ø—É—Å–∫–∞–µ–º —Å–∏—Å—Ç–µ–º—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–∫–∞–∑–æ–≤")
	for _, order := range orders {
		wg.Add(1)
		go ShopOrder(order, &wg)
	}

	wg.Wait()

	fmt.Println("–í—Å–µ –∑–∞–∫–∞–∑—ã —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã")
}
```